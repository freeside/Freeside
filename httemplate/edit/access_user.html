<% include( 'elements/edit.html',
                 'name'   => 'Employee',
                 'table'  => 'access_user',
                 'fields' => [
                               'username',
                               { field=>'_password', type=>'password' },
                               { field=>'_password2', type=>'password' },
                               'last',
                               'first',
                               { field=>'disabled', type=>'checkbox', value=>'Y' },
                             ],
                 'labels' => { 
                               'usernum'   => 'User number',
                               'username'  => 'Username',
                               '_password' => 'Password',
                               '_password2'=> 'Re-enter Password',
                               'last'      => 'Last name',
                               'first'     => 'First name',
                               'disabled'  => 'Disable employee',
                             },
                 'edit_callback' => sub { my( $c, $o ) = @_; 
                                          $o->set('_password', '');
                                        },
                 'viewall_dir' => 'browse',
                 'html_bottom' =>
                   sub {
                     my $access_user = shift;

                     '<BR>Internal Access Groups<BR>'.
                     ntable("#cccccc",2).
                     '<TR><TD>'.
                     include( '/elements/checkboxes-table.html',
                                'source_obj'   => $access_user,
                                'link_table'   => 'access_usergroup',
                                'target_table' => 'access_group',
                                'name_col'     => 'groupname',
                                'target_link'  => $p.'edit/access_group.html?',
                                #'disable-able' => 1,
                            ).
                     '</TR></TD></TABLE>'
                     ;
                   },
           )
%>
<%init>

die "access denied"
  unless $FS::CurrentUser::CurrentUser->access_right('Configuration');

</%init>
